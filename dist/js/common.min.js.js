"use strict";function randomNum(t,e){return parseInt(Math.random()*(e-t+1))+t}function getid(t){return document.getElementById(t)}function filterTex(t){for(var e=["傻B","妈蛋","bitch","fuck","操","小学生","反清复明"],n=0;n<e.length;n++){var r=new RegExp(e[n],"gi");t=t.replace(r,"**")}return t}function randomColor(t){if(16==t){t="0123456789abcdef";for(var e="#",n=0;n<6;n++)e+=t.charAt(parseInt(Math.random()*t.length));return e}if("rgb"==t)return"rgb("+parseInt(256*Math.random())+","+parseInt(256*Math.random())+","+parseInt(256*Math.random())+")";alert("参数传错了")}function setDb(t){return t<10?"0"+t:""+t}function setTime(t){return{sec:setDb(t%60),min:setDb(Math.floor(t/60)%60),hour:setDb(Math.floor(t/60/60)%24),day:Math.floor(t/60/60/24)}}function strToObj(t){for(var e=t.split("&"),n={},r=0;r<e.length;r++){var i=e[r].split("=");n[i[0]]=i[1]}return n}function objToStr(t){var e="";for(var n in t)e+=n+"="+t[n]+"&";return e=e.slice(0,-1)}function getSearch(t,e){var n=strToObj(decodeURI(t).slice(1));for(var r in n){if(n[r]!=n[e])return;return n[r]}}function bind(t,e,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent("on"+e,n)}function getstyle(t,e){return window.getComputedStyle?getComputedStyle(t,!1)[e]:t.currentStyle?t.currentStyle[e]:t.style[e]}function startMove(i,a,o){clearInterval(i.timer),i.timer=setInterval(function(){var t=!0;for(var e in a){var n=0;n="opacity"==e?100*getstyle(i,e):parseInt(getstyle(i,e));var r=(a[e]-n)/6;r=0<r?Math.ceil(r):Math.floor(r),t=n==a[e],"opacity"==e?(i.style.opacity=(n+r)/100,i.style.filter="alpha(opacity:"+(n+r)+")"):i.style[e]=n+r+"px"}t&&(clearInterval(i.timer),o&&o())},30)}var checkReg={trim:function(t){return t.replace(/^\s+|\s+$/g,"")},tel:function(t){return/^1[3-9]\d{9}$/.test(t)},email:function(t){return/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/.test(t)},idcard:function(t){return/^(\d{17}|\d{14})[\dX]$/.test(t)},psweasy:function(t){return/((?=.*\d)(?=.*\D)|(?=.*[a-zA-Z])(?=.*[^a-zA-Z]))(?!^.*[\u4E00-\u9FA5].*$)^\S{6,16}$/.test(t)},pwwagain:function(t,e){return t===e},urladr:function(t){return/[a-zA-Z0-9][-a-zA-Z0-9]{0,62}(\.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+\.?/.test(t)},name:function(t){return/^[a-zA-Z][\w\-]{5,19}$/.test(t)},chinese:function(t){return/^[\u2E80-\u9FFF]+$/.test(t)}},Cookie={set:function(t,e,n){var r=t+"="+e;n&&(n.expires&&(r+=";expires="+n.expires.toUTCString()),n.path&&(r+=";path="+n.path),n.domain&&(r+=";domain="+n.domain)),document.cookie=r},get:function(t){for(var e=document.cookie.split("; "),n=0;n<e.length;n++){var r=e[n].split("=");if(t==r[0])return r[1]}},remove:function(t){var e=new Date;e.setDate(e.getDate()-1),this.set(t,"no",{expires:e,path:"/"})}};function backTop(e,t,n){n=n||30,window.onscroll=function(){var t=window.scrollY;e.style.display=300<=t?"block":"none"},e.onclick="fast"===t?function(){window.scrollTo(0,0)}:function(){var e=setInterval(function(){var t=window.scrollY;0<t?window.scrollTo(0,t-20):clearInterval(e)},n)}}function pullDownMenu(t,e){var n=document.getElementById(t).children;if("onmouseout"==e||"onmouseover"==e)for(var r=0;r<n.length;r++)n[r].onmouseover=function(){this.children[0].style.display="block"},n[r].onmouseout=function(){this.children[0].style.display="none"};if("onclick"==e)for(r=0;r<n.length;r++)n[r].idx=r,n[r].istrue=!0,n[r].onclick=function(){this.istrue?this.children[0].style.display="block":this.children[0].style.display="none",this.istrue=!this.istrue}}function setTab(t,e){var n=document.getElementById(t),r=n.children[0].children,i=n.children[1].children;r[0].className=e,i[0].style.display="block";for(var a=0;a<r.length;a++)r[a].idx=a,r[a].onclick=function(){for(var t=0;t<r.length;t++)r[t].className="",i[t].style.display="none";this.className=e,i[this.idx].style.display="block"}}function sidebar(t,e,n){var r=document.getElementById(t),i=r.offsetWidth;if(console.log(i),"onmouseout"!=n&&"onmouseover"!=n||(r.onmouseenter=function(){startMove(r,"left"==e?{left:0}:{right:0})},r.onmouseleave=function(){startMove(r,"left"==e?{left:-i}:{right:-i})}),"onclick"==n){var a=!0;r.onclick=function(){startMove(r,a?"left"==e?{left:0}:{right:0}:"left"==e?{left:-i}:{right:-i}),a=!a}}}function autoCar(n,r,t,e){var i=0;if(Cookie.get("uname")){var a=Cookie.get("uname");console.log(a),$.ajax({type:"POST",url:n+"api/carShowNunfrist_select.php",data:"admin="+a,success:function(t){var e=JSON.parse(t);console.log("用户历史进购物车清单"),console.log(e.adminlist),console.log(Array.isArray(e.adminlist)),e.adminlist?(e.adminlist.map(function(t){i+=Number(t.qty)}),$("#HeaderCartCount").html(i),$("#go_cart").html(i),$("#cartListView .buy").css("display","block"),$("#cartListView .none_car").css("display","none"),creatAddMycar(e,n),$("#carListTotalCount").html(i),r&&r(e)):(i=0,$("#HeaderCartCount").html(0),$("#go_cart").html(0),$("#cartListView ul").html(""),$("#cartListView .buy").css("display","none"),$("#cartListView .none_car").css("display","block"),fnno&&fnno())}})}else $("#HeaderCartCount").html(0),$("#go_cart").html(0),$("#cartListView ul").html(""),$("#cartListView .buy").css("display","none"),$("#cartListView .none_car").css("display","block"),e&&e()}function creatAddMycar(t,n){$("#cartListView ul").html("");var r=0,e=t.adminlist.map(function(t){var e=t.imgurl1;return r+=t.cutprice*t.qty,e=n?t.imgurl1:e.slice(3),'<li data-id="'+t.goodsid+'">\n                    <div class="pic">\n                        <a href="" target="_blank" title="'+t.name+'">\n                        <img src="'+e+'"></a>\n                    </div>\n                    <div class="name">\n                        <a href="" target="_blank" title="'+t.name+'">'+t.name+'\n                        <span></span></a>\n                    </div>\n                    <div class="price">￥'+t.cutprice+'</div>\n                    <div class="talqty"><span>×</span>'+t.qty+"</div>\n                </li>"}).join("");console.log(r.toFixed(2)),$("#cartListView ul").html(e),$("#carListTotalCount").next().html(r.toFixed(2))}function creatAddCarSide(t,e,n){$("#item_add").html("");var r='<li class="b0">\n                    <div class="pic">\n                        <img src="'+t.imgurl1+'">\n                    </div>\n                    <div class="name">'+t.name+"<br>\n                        <span>X "+e+' 加入成功</span>\n                    </div>\n                    <div class="price">￥'+t.cutprice+"</div>\n                </li>";$("#item_add").html(r),$("#go_cart").html(n),$("#HeaderCartCount").html(n),$(".new_car").css({right:"-250px",display:"block"}),$(".new_car").animate({right:"52px",display:"block"},1e3),$(".car_buy").addClass("move"),$(".new_car").animate({right:"52px",display:"block"},1500,function(){$(".car_buy").removeClass("move")}),$(".new_car").animate({right:"-350px",display:"none"},"slow")}